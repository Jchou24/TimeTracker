(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c7002a8e"],{"06f9":function(t,e,n){"use strict";n("d851")},"0db8":function(t,e,n){"use strict";n("4407")},"13d5":function(t,e,n){"use strict";var c=n("23e7"),a=n("d58f").left,r=n("a640"),s=n("ae40"),o=n("2d00"),i=n("605d"),u=r("reduce"),l=s("reduce",{1:0}),d=!i&&o>79&&o<83;c({target:"Array",proto:!0,forced:!u||!l||d},{reduce:function(t){return a(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},4407:function(t,e,n){},4612:function(t,e,n){"use strict";n("9a41")},"4fad":function(t,e,n){var c=n("23e7"),a=n("6f53").entries;c({target:"Object",stat:!0},{entries:function(t){return a(t)}})},"50f3":function(t,e,n){"use strict";n.r(e);var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Container",{attrs:{isFullHeight:!1}},[n("Center",{staticClass:"PermissionEditor"},[n("Tab",{attrs:{tabTitles:t.tabTitles}},[n("v-tab-item",[n("AdminAccounts",{staticClass:"add-margin",attrs:{width:800,accounts:t.accounts},on:{GetAccounts:t.HandleGetAccounts}})],1),n("v-tab-item",[n("AdminUncheckAccounts",{staticClass:"add-margin",attrs:{width:800},on:{GetAccounts:t.HandleGetAccounts}})],1)],1)],1)],1)},a=[],r=n("a6f4"),s=n("3d0f"),o=n("9fb8"),i=n("7193"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.props.accounts?n("GeneralCard",{staticClass:"AdminAccounts",attrs:{title:"Accounts",titleIcon:"mdi-account-group",width:t.width},scopedSlots:t._u([{key:"body",fn:function(){return[n("v-card-title",{staticClass:"px-10 pb-2"},[t._v(" #Accounts: "+t._s(t.accountsExtend.length)+" "),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n("v-data-table",{staticClass:"px-6",attrs:{color:"primary","show-select":"","item-key":"guid",headers:t.headers,items:t.accountsExtend,search:t.search,"items-per-page":10,loading:t.isLoading,"single-select":!0,"fixed-header":"",filterable:"","multi-sort":"","no-data-text":"No Accounts"},scopedSlots:t._u([{key:"header.data-table-select",fn:function(){return[t._v(" Change? ")]},proxy:!0},{key:"item.data-table-select",fn:function(t){var e=t.isSelected;return[n("v-simple-checkbox",{staticClass:"flex-center",attrs:{value:e,color:"warning"}})]}},{key:"item.admin",fn:function(e){var c=e.item;return[n("v-simple-checkbox",{attrs:{color:"primary"},model:{value:t.accountsRoles[c.guid][t.UserRoles.Admin],callback:function(e){t.$set(t.accountsRoles[c.guid],t.UserRoles.Admin,e)},expression:"accountsRoles[item.guid][UserRoles.Admin]"}})]}},{key:"item.user",fn:function(e){var c=e.item;return[n("v-simple-checkbox",{attrs:{color:"primary"},model:{value:t.accountsRoles[c.guid][t.UserRoles.User],callback:function(e){t.$set(t.accountsRoles[c.guid],t.UserRoles.User,e)},expression:"accountsRoles[item.guid][UserRoles.User]"}})]}},{key:"item.accountStatus",fn:function(e){var c=e.item;return[n("v-select",{staticClass:"mt-2 mb-n3",attrs:{rounded:"",dense:"",items:t.selectOptions},scopedSlots:t._u([{key:"item",fn:function(e){var c=e.item;return[n("div",{staticClass:"text-center"},[n("v-icon",{staticClass:"ml-6 mr-4"},[t._v(t._s(t.accountStatusIcon[c.value]))]),t._v(" "+t._s(c.text)+" ")],1)]}},{key:"selection",fn:function(e){var c=e.item;return[n("v-chip",{staticClass:"pr-4",attrs:{link:"",outlined:"",color:t.accountStatusColor[c.value]}},[n("v-icon",[t._v(t._s(t.accountStatusIcon[c.value]))]),t._v(" "+t._s(c.text)+" ")],1)]}}],null,!0),model:{value:t.accountsStatus[c.guid].value,callback:function(e){t.$set(t.accountsStatus[c.guid],"value",e)},expression:"accountsStatus[item.guid].value"}})]}}],null,!1,982306721),model:{value:t.selected.value,callback:function(e){t.$set(t.selected,"value",e)},expression:"selected.value"}})]},proxy:!0},{key:"action",fn:function(){return[n("v-btn",{staticClass:"pa-6 px-8 text-center text-caption",attrs:{color:"primary",loading:t.isLoading,elevation:"2",large:"",rounded:"",disabled:!t.isUpdateAccounts},on:{click:t.HandleUpdateAccounts}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-upload-multiple")]),t._v(" Update ")],1)]},proxy:!0}],null,!1,2118302689)}):t._e()},l=[],d=(n("4de4"),n("4160"),n("d81d"),n("13d5"),n("a9e3"),n("4fad"),n("b64b"),n("d3b7"),n("07ac"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("5530"));function f(t){if(Array.isArray(t))return t}n("a4d3"),n("e01a"),n("d28b");function v(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],c=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(c=(s=o.next()).done);c=!0)if(n.push(s.value),e&&n.length===e)break}catch(i){a=!0,r=i}finally{try{c||null==o["return"]||o["return"]()}finally{if(a)throw r}}return n}}var p=n("06c5");function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(t,e){return f(t)||v(t,e)||Object(p["a"])(t,e)||m()}var h=n("e643"),A=n("04b0"),g=n("880d"),y=n("d4ec"),x=n("bee2"),k=n("262e"),j=n("2caf"),O=n("240f"),U=function(t){Object(k["a"])(n,t);var e=Object(j["a"])(n);function n(t,c){return Object(y["a"])(this,n),e.call(this,t,c)}return Object(x["a"])(n,[{key:"GetUncheckAccounts",value:function(t,e,n){this.HttpPost("api/Admin/GetUncheckAccounts",t,void 0,e,n)}},{key:"GetAccounts",value:function(t,e,n){this.HttpPost("api/Admin/GetAccounts",t,void 0,e,n)}},{key:"UpdateAccounts",value:function(t,e,n,c){this.HttpPost("api/Admin/UpdateAccounts",e,t,n,c)}}]),n}(O["a"]),C=n("6120"),_=Object(r["defineComponent"])({name:"AdminAccounts",components:{GeneralCard:h["a"]},props:{accounts:{required:!0},width:{type:Number}},setup:function(t,e){var n=e.emit,c=e.root,a=c.$store,s=c.$router,o=a,i=s,u=new U(o,i),l=Object(A["useToast"])(),f=Object(r["ref"])(!1);function v(){n("GetAccounts")}var p=Object(r["ref"])(""),m=[{text:"Name",value:"name",align:"center"},{text:"Email",value:"email",align:"center"},{text:"Status",value:"accountStatus",align:"center",width:220},{text:"Admin",value:"admin",align:"center"},{text:"User",value:"user",align:"center"}],h=Object(C["b"])().map((function(t){return{text:C["a"][t],value:t,disabled:t==C["a"].Uncheck}})),y=Object(r["computed"])((function(){return t.accounts.map((function(t){var e={};return Object.assign(e,t),e.isSelectable=!1,e.admin="",e.user="",e}))}));function x(){return Object(C["c"])().reduce((function(t,e){return t[e]=!1,t}),{})}function k(t){return t.userRoles.reduce((function(t,e){return t[e.id]=!0,t}),Object(r["reactive"])(x()))}var j=Object(r["reactive"])({});function O(t){t.forEach((function(t){return j[t.guid]=k(t)}))}O(t.accounts),Object(r["watch"])((function(){return t.accounts}),(function(t){O(t)}));var _=Object(r["reactive"])({});function S(t){t.forEach((function(t){return _[t.guid]=Object(r["ref"])(t.accountStatus)}))}S(t.accounts),Object(r["watch"])((function(){return t.accounts}),(function(t){S(t)}));var w=Object(r["computed"])((function(){return t.accounts.filter((function(t){var e=Object.entries(k(t)).filter((function(e,n){var c=b(e,2),a=c[0],r=c[1];return j[t.guid][parseInt(a)]!=r}));return e.length>0})).map((function(t){return t.guid}))})),R=Object(r["computed"])((function(){var e=t.accounts.filter((function(t){return t.accountStatus!==_[t.guid].value}));return e.map((function(t){return t.guid}))})),E=Object(r["computed"])((function(){return w.value.length>0||R.value.length>0})),G=function(t){return{Guid:t,Name:"",IsUpdateName:!1,AccountStatus:C["a"].Approved,IsUpdateAccountStatus:!1,IsUpdateUserRoles:!1,UserRoles:[]}};function I(){if(E.value){var t={};w.value.forEach((function(e){t[e]=Object(d["a"])(Object(d["a"])({},G(e)),{},{IsUpdateUserRoles:!0,UserRoles:Object.keys(j[e]).map(Number).filter((function(t){return j[e][t]}))})})),R.value.forEach((function(e){e in t||(t[e]=G(e)),t[e]=Object(d["a"])(Object(d["a"])({},t[e]),{},{IsUpdateAccountStatus:!0,AccountStatus:_[e].value})}));var e=Object.values(t);u.UpdateAccounts(e,f,(function(){Object(g["b"])("Account(s) updated!",l),v()}))}}var $=Object(r["computed"])((function(){var t=new Set(w.value);R.value.forEach((function(e){return t.add(e)}));var e=Object(r["ref"])(y.value.filter((function(e){return t.has(e.guid)})));return e}));return{props:t,search:p,selected:$,headers:m,accountsExtend:y,accountsRoles:j,accountsStatus:_,selectOptions:h,accountStatusIcon:C["f"],accountStatusColor:C["e"],isLoading:f,isUpdateAccounts:E,UserRoles:C["d"],HandleUpdateAccounts:I}}}),S=_,w=(n("0db8"),n("2877")),R=Object(w["a"])(S,u,l,!1,null,"7178378e",null),E=R.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("GeneralCard",{staticClass:"AdminUncheckAccounts",attrs:{title:"Uncheck Accounts",titleIcon:"mdi-account-alert",width:t.width},scopedSlots:t._u([{key:"body",fn:function(){return[n("v-card-title",{staticClass:"px-10 pb-2"},[t._v(" #Unchecks: "+t._s(t.uncheckAccounts.length)+" "),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n("v-data-table",{staticClass:"px-6",attrs:{headers:t.headers,items:t.uncheckAccounts,search:t.search,"items-per-page":10,loading:t.isLoading,"fixed-header":"",filterable:"","multi-sort":"","no-data-text":"No Uncheck Accounts"},scopedSlots:t._u([{key:"item.accountStatus",fn:function(e){var c=e.item;return[n("v-btn",{staticClass:"text-capitalize mr-2",attrs:{color:"primary",elevation:"4",rounded:""},on:{click:function(e){return t.ApproveUncheckAccounts(c)}}},[t._v(" Approve ")]),n("v-btn",{staticClass:"text-capitalize",attrs:{color:"warning",elevation:"4",rounded:""},on:{click:function(e){return t.DenyUncheckAccounts(c)}}},[t._v(" Deny ")])]}}])})]},proxy:!0}])})},I=[],$=(n("b0c0"),Object(r["defineComponent"])({name:"AdminUncheckAccounts",props:{width:{type:Number}},components:{GeneralCard:h["a"]},setup:function(t,e){var n=e.emit,c=e.root,a=c.$store,s=c.$router,o=a,i=s,u=new U(o,i),l=Object(A["useToast"])(),d=Object(r["ref"])(!1),f=Object(r["ref"])([]);function v(){u.GetUncheckAccounts(d,(function(t){f.value=t.data}))}function p(){n("GetAccounts")}function m(t,e){var n=[{Guid:t.guid,Name:"",IsUpdateName:!1,AccountStatus:e?C["a"].Approved:C["a"].Rejected,IsUpdateAccountStatus:!0,UserRoles:[],IsUpdateUserRoles:!1}];u.UpdateAccounts(n,d,(function(){var e=t.name?t.name:t.email;Object(g["b"])("".concat(e,": Account status is updated!"),l),v(),p()}))}function b(t){m(t,!0)}function h(t){m(t,!1)}v();var y=Object(r["ref"])(""),x=[{text:"Name",value:"name",align:"center"},{text:"Email",value:"email",align:"center"},{text:"Action",value:"accountStatus",align:"center"}];return{search:y,headers:x,uncheckAccounts:f,isLoading:d,ApproveUncheckAccounts:b,DenyUncheckAccounts:h}}})),T=$,N=Object(w["a"])(T,G,I,!1,null,"d2175d54",null),H=N.exports,L=Object(r["defineComponent"])({name:"PermissionEditor",props:{},components:{Container:s["a"],Center:o["a"],Tab:i["a"],AdminAccounts:E,AdminUncheckAccounts:H},setup:function(t,e){var n=e.root,c=n.$store,a=n.$router,s=c,o=a,i=new U(s,o),u=Object(r["ref"])(!1),l=Object(r["ref"])([]);function d(){i.GetAccounts(u,(function(t){l.value=t.data}))}d();var f=[{text:"Accounts",icon:"mdi-account-group"},{text:"Uncheck Accounts",icon:"mdi-account-alert"}];return{tabTitles:f,accounts:l,HandleGetAccounts:d}}}),P=L,D=(n("4612"),Object(w["a"])(P,c,a,!1,null,"6cbaf6f4",null));e["default"]=D.exports},"5d0b":function(t,e,n){},7193:function(t,e,n){"use strict";var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tabs",{staticClass:"Tab",attrs:{vertical:""}},[t._l(t.tabTitles,(function(e,c){return n("v-tab",{key:c,staticClass:"font-weight-bold text-subtitle-1"},[n("v-icon",{attrs:{left:""}},[t._v(t._s(e.icon))]),t._v(t._s(e.text)+" ")],1)})),t._t("default")],2)},a=[],r=n("a6f4"),s=Object(r["defineComponent"])({name:"Tab",props:{tabTitles:{type:Array}}}),o=s,i=(n("06f9"),n("2877")),u=Object(i["a"])(o,c,a,!1,null,null,null);e["a"]=u.exports},7452:function(t,e,n){"use strict";n("5d0b")},"9a41":function(t,e,n){},d58f:function(t,e,n){var c=n("1c0b"),a=n("7b0b"),r=n("44ad"),s=n("50c4"),o=function(t){return function(e,n,o,i){c(n);var u=a(e),l=r(u),d=s(u.length),f=t?d-1:0,v=t?-1:1;if(o<2)while(1){if(f in l){i=l[f],f+=v;break}if(f+=v,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=v)f in l&&(i=n(i,l[f],f,u));return i}};t.exports={left:o(!1),right:o(!0)}},d851:function(t,e,n){},e643:function(t,e,n){"use strict";var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"GeneralCard",attrs:{elevation:"10",width:t.width,loading:t.loading,outlined:"",shaped:""}},[n("v-card-title",{staticClass:"title flex-center text-h4 my-4 font-weight-bold"},[t.titleIcon?n("v-icon",{staticClass:"title text-h4",attrs:{left:""}},[t._v(t._s(t.titleIcon))]):t._e(),t._v(" "+t._s(t.title)+" ")],1),n("v-divider",{staticClass:"mb-4"}),t._t("body"),t.isCardActionEmpty?n("div",{staticClass:"mb-8"}):n("v-divider",{staticClass:"mt-4"}),t.isCardActionEmpty?t._e():n("v-card-actions",{staticClass:"py-6 flex-center"},[t._t("action")],2)],2)},a=[],r=(n("a9e3"),n("a6f4")),s=Object(r["defineComponent"])({name:"GeneralCard",props:{width:{type:Number,default:500},title:{type:String,default:""},titleIcon:{type:String,default:""},loading:{type:Boolean,default:!1}},setup:function(t,e){e.emit,e.root;var n=e.slots,c=Object(r["computed"])((function(){return!n["action"]}));return{isCardActionEmpty:c}}}),o=s,i=(n("7452"),n("2877")),u=Object(i["a"])(o,c,a,!1,null,"438787f2",null);e["a"]=u.exports}}]);
//# sourceMappingURL=chunk-c7002a8e.ad326856.js.map