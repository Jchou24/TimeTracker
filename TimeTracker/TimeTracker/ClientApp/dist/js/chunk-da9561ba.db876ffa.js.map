{"version":3,"sources":["webpack:///./src/components/trackTask/taskForm/TaskDayTimelineTitle.vue?ecc4","webpack:///./src/views/TaskEditor.vue?08fe","webpack:///./src/components/trackTask/taskForm/TaskDayTimeline.vue?7d91","webpack:///./src/components/trackTask/taskForm/TaskDayForm.vue?47d8","webpack:///./node_modules/jctk-table-form/src/components/ShareVar.js","webpack:///./src/models/constants/task.ts","webpack:///./src/components/trackTask/taskForm/TaskDayForm.vue","webpack:///./src/components/trackTask/taskForm/TaskDayForm.vue?878b","webpack:///./src/components/trackTask/taskForm/TaskDayForm.vue?8b3f","webpack:///./src/components/trackTask/taskForm/TaskDayTimelineTitle.vue?7f26","webpack:///./src/components/trackTask/taskForm/TaskDayTimelineTitle.vue","webpack:///./src/components/trackTask/taskForm/TaskDayTimelineTitle.vue?f044","webpack:///./src/components/trackTask/taskForm/TaskDayTimelineTitle.vue?62fb","webpack:///./src/components/trackTask/taskForm/TaskDayTimeline.vue","webpack:///./src/components/trackTask/taskForm/TaskDayTimeline.vue?22db","webpack:///./src/components/trackTask/taskForm/TaskDayTimeline.vue?18ec","webpack:///./src/views/TaskEditor.vue","webpack:///./src/views/TaskEditor.vue?4b45","webpack:///./src/views/TaskEditor.vue?3550","webpack:///./src/components/trackTask/taskForm/TaskDayTimeline.vue?b630","webpack:///./src/components/trackTask/taskForm/TaskDayForm.vue?1564","webpack:///./src/views/TaskEditor.vue?8884"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","scopedSlots","_u","key","fn","attrs","targetUsers","targetDates","widthMetaDisplayer","on","$event","ref","daysData","proxy","targetUser","HandleUpdateDaysData","staticRenderFns","_e","_l","dayData","idx","class","isFormClicked","user","EmitUpdateDaysData","HandleClickTableForm","directives","name","rawName","value","expression","GetFormClass","isLeave","options","HandleAddRows","HandleRemoveRows","HandleMoveRows","HandleEmptyCells","HandleModifyCells","$emit","nativeOn","model","callback","$$v","$set","cellTypes","singleSelect","number","textarea","defaultValue","valueTypes","Number","String","GetDefaultRow","numberOfColumns","head","length","tmpRowArray","Array","fill","undefined","cellType","tmpRow","forEach","valueOfCell","colIndex","relatedKey","GetCellRefName","rowIndex","resizeTriggerBlockRowClass","resizeTriggerBlockColClass","startResizeRowEmitName","startResizeColEmitName","resizedRowEmitName","resizedColEmitName","addRowEmitName","removeRowsEmitName","moveRowEmitName","cellModifiedEmitName","emptyCellEmitName","TransformedOptions","taskOptions","map","taskOption","displayName","id","taskParameters","title","style","step","min","max","width","taskTypes","taskSources","maxLength","isSuggestions","throttle","props","type","Object","onClickaway","components","setup","emit","root","$store","$router","store","$route","router","taskEditorAPIHandler","taskEditorWSHandler","isLoading","CheckIsLightForm","formData","emitData","tasks","x","guid","displayOrder","newIndex","date","taskType","state","taskSource","taskName","taskContent","createTask","ownerGuid","CreateTask","response","guids","data","row","task","DeleteTasks","taskGuids","UpdateTaskRowOrder","moveRow","GetValue","updateTaskCols","cell","newValue","push","UpdateTaskCol","commit","isOptionsReady","component","active","HandleClickIsLeave","_v","_s","FormatDate","SimpleTransition","UpdateIsLeave","color","dateRange","TaskDayForm","TaskDayTimelineTitle","RippleTransitionFlip","taskEditorWSListener","d","GetDaysData","tasksDays","result","mapper","tasksDay","defaultDayData","isShowContent","SetDaysData","startDate","endDate","queryTasks","setTimeout","Unsubscribe","Subscribe","InitListener","default","Container","TwoColumn","MetaDisplayer","TaskPeriodSimpleSummary","TaskDayTimeline","refs","parameterAPIHandler","InitTaskParameter","GetTaskSources","GetTaskTypes","GetDayWorkLimitTime","summary","InitSummary"],"mappings":"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","file":"js/chunk-da9561ba.db876ffa.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDayTimelineTitle.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Container',[_c('div',{staticClass:\"TaskEditor\"},[_c('TwoColumn',{scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('MetaDisplayer',{attrs:{\"singleSelectTarget\":\"\",\"selectedUsers\":_vm.targetUsers,\"selectedDates\":_vm.targetDates,\"width\":_vm.widthMetaDisplayer},on:{\"update:selectedUsers\":function($event){_vm.targetUsers=$event},\"update:selected-users\":function($event){_vm.targetUsers=$event},\"update:selectedDates\":function($event){_vm.targetDates=$event},\"update:selected-dates\":function($event){_vm.targetDates=$event}}}),_c('TaskPeriodSimpleSummary',{ref:\"summary\",attrs:{\"isReactiveMode\":\"\",\"selectedUsers\":_vm.targetUsers,\"daysData\":_vm.daysData,\"selectedDates\":_vm.targetDates}})]},proxy:true},{key:\"right\",fn:function(){return [_c('TaskDayTimeline',{staticClass:\"margin-center\",attrs:{\"user\":_vm.targetUser,\"dateRange\":_vm.targetDates},on:{\"updateDaysData\":_vm.HandleUpdateDaysData}})]},proxy:true}])})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"TaskDayTimeline\",attrs:{\"align-top\":\"\"}},[_c('SimpleTransition',{attrs:{\"enterAnimation\":\"animate__backInDown\",\"leaveAnimation\":\"animate__backOutUp\"}},[(_vm.isShowContent)?_c('div',{staticClass:\"task-timeline-line\"}):_vm._e()]),_c('div',{staticClass:\"task-timeline-body\"},[(_vm.isShowContent)?_c('RippleTransitionFlip',_vm._l((_vm.daysData),function(dayData,idx){return _c('div',{key:idx,staticClass:\"timeline-row\",class:{ 'focus-row': dayData.isFormClicked },attrs:{\"data-index\":idx}},[_c('TaskDayTimelineTitle',{staticClass:\"timeline-row-title\",attrs:{\"dayData\":dayData,\"user\":_vm.user},on:{\"input\":_vm.EmitUpdateDaysData}}),_c('TaskDayForm',{staticClass:\"timeline-row-form\",attrs:{\"dayData\":dayData,\"user\":_vm.user},on:{\"handleClickTableForm\":_vm.HandleClickTableForm,\"input\":_vm.EmitUpdateDaysData}})],1)}),0):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"TaskDayForm\"},[(_vm.isOptionsReady)?_c('TableForm',{directives:[{name:\"on-clickaway\",rawName:\"v-on-clickaway\",value:(function () { return _vm.dayData.isFormClicked = false; }),expression:\"() => dayData.isFormClicked = false\"}],staticClass:\"table-form\",class:_vm.GetFormClass(_vm.dayData),attrs:{\"isReadonly\":!_vm.dayData.isFormClicked || _vm.dayData.isLeave,\"options\":_vm.options},on:{\"addRows\":function($event){return _vm.HandleAddRows(_vm.dayData, $event)},\"removeRows\":function($event){return _vm.HandleRemoveRows(_vm.dayData, $event)},\"moveRows\":function($event){return _vm.HandleMoveRows(_vm.dayData, $event)},\"emptyCells\":function($event){return _vm.HandleEmptyCells(_vm.dayData, $event)},\"modifyCells\":function($event){return _vm.HandleModifyCells(_vm.dayData, $event)},\"input\":function($event){return _vm.$emit('input')}},nativeOn:{\"click\":function($event){return _vm.HandleClickTableForm(_vm.dayData)}},model:{value:(_vm.dayData.formData),callback:function ($$v) {_vm.$set(_vm.dayData, \"formData\", $$v)},expression:\"dayData.formData\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","'use strict'\r\n\r\nlet cellTypes = {\r\n    singleSelect: \"singleSelect\",\r\n    number: \"number\",\r\n    textarea: \"textarea\",\r\n}\r\n\r\nlet defaultValue = {\r\n    singleSelect: () => 0,\r\n    number: () => 0.0,\r\n    textarea: () => \"\",\r\n}\r\n\r\nlet valueTypes = {\r\n    singleSelect: Number,\r\n    number: Number,\r\n    textarea: String,\r\n}\r\n\r\nfunction GetDefaultRow(options){\r\n    let numberOfColumns = options.head.length\r\n    let tmpRowArray = Array(numberOfColumns).fill(undefined)\r\n    for(let idx in options.head){\r\n        let cellType = options.head[idx].cellType\r\n        tmpRowArray[idx] = defaultValue[cellType]()\r\n    }\r\n\r\n    let tmpRow = {}\r\n    tmpRowArray.forEach((valueOfCell, colIndex) => {\r\n        let relatedKey = options.head[colIndex].relatedKey\r\n        tmpRow[relatedKey] = valueOfCell\r\n    })\r\n\r\n    return tmpRow\r\n}\r\n\r\nfunction GetCellRefName(rowIndex, colIndex){\r\n    return `${rowIndex}_${colIndex}`\r\n}\r\n\r\nexport default {\r\n    resizeTriggerBlockRowClass: \"resize-trigger-block-row\",\r\n    resizeTriggerBlockColClass: \"resize-trigger-block-col\",\r\n    startResizeRowEmitName: \"startResizeRow\",\r\n    startResizeColEmitName: \"startResizeCol\",\r\n    resizedRowEmitName: \"resizedRow\",\r\n    resizedColEmitName: \"resizedCol\",\r\n    addRowEmitName: \"addRows\",\r\n    removeRowsEmitName: \"removeRows\",\r\n    moveRowEmitName: \"moveRows\",\r\n    cellModifiedEmitName: \"modifyCells\",\r\n    emptyCellEmitName: \"emptyCells\",\r\n    cellTypes,\r\n    valueTypes,\r\n    defaultValue,\r\n    GetDefaultRow,\r\n    GetCellRefName,\r\n}","import FormSettings from 'jctk-table-form/src/components/ShareVar'\r\n\r\nimport { ITaskOption, ITaskParameters } from \"../tasks\";\r\n\r\nconst TransformedOptions = ( taskOptions: Array<ITaskOption> ) => \r\n    taskOptions.map( taskOption => ({ name: taskOption.displayName, value: taskOption.id }) ) || []\r\n\r\nconst GetOptions = ( taskParameters: ITaskParameters ) =>({\r\n    head:[{\r\n            title: \"時數\",\r\n            relatedKey: \"consumeTime\",\r\n            cellType: FormSettings.cellTypes.number /*as string*/,\r\n            style:{\r\n                \"width\": \"80px\",\r\n                \"min-width\": \"80px\",\r\n            },\r\n            options:{\r\n                step: 0.5,\r\n                min: 0.0,\r\n                max: 12.0,\r\n            },\r\n        },{\r\n            title: \"工作類型\",\r\n            relatedKey: \"taskType\",\r\n            cellType: FormSettings.cellTypes.singleSelect  /*as string*/,\r\n            style:{\r\n                width: \"160px\",\r\n                \"min-width\": \"160px\",\r\n            },\r\n            options: TransformedOptions(taskParameters.taskTypes),\r\n        },{\r\n            title: \"工作來源\",\r\n            relatedKey: \"taskSource\",\r\n            cellType: FormSettings.cellTypes.singleSelect  /*as string*/,\r\n            style:{\r\n                width: \"160px\",\r\n                \"min-width\": \"160px\",\r\n            },\r\n            options: TransformedOptions(taskParameters.taskSources),\r\n        },{\r\n            title: \"工作名稱\",\r\n            relatedKey: \"taskName\",\r\n            cellType: FormSettings.cellTypes.textarea  /*as string*/,\r\n            options:{\r\n                maxLength: 256,\r\n                isSuggestions: true,\r\n                throttle: 250,\r\n            },\r\n        },{\r\n            title: \"工作內容\",\r\n            relatedKey: \"taskContent\",\r\n            cellType: FormSettings.cellTypes.textarea  /*as string*/,\r\n            options:{\r\n                maxLength: 256,\r\n                isSuggestions: true,\r\n                throttle: 250,\r\n            },\r\n        }]\r\n})\r\n\r\nexport {\r\n    GetOptions\r\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { computed, defineComponent, Ref, ref, watch } from '@vue/composition-api'\n\nimport { directive as onClickaway } from 'vue-clickaway2'\nimport { Store } from 'vuex/types/index'\nimport { TaskEditorAPIHandler, TaskEditorWSHandler } from '@/api/taskEditor'\nimport { IStore } from '@/models/store'\nimport { IClaims } from '@/models/authentication'\nimport { ICreateTask, IDateRange, IDayData, IDeleteTasks, ITaskOption, \n    IUpdateTask, IUpdateTaskCol, IUpdateTaskRowOrder } from '@/models/tasks'\nimport { GetOptions } from '@/models/constants/task'\nimport { GetGuid } from '@/util/authentication'\nimport { GetOptionById, GetOptionGuidById } from '@/util/taskParameters'\n\nimport { IAddRow, IMoveRow, IRemoveRow, IUpdateCell } from './taskform'\n\nexport default defineComponent({\n    name: 'TaskDayForm',\n    props:{\n        user:{\n            type: Object as () => IClaims,\n        },\n        dayData:{\n            type: Object as () => IDayData,\n        }\n    },\n    directives: {\n        onClickaway: onClickaway,\n    },\n    components:{\n        \n    },\n    setup( props, { emit, root } ){\n        const { $store, $router, $route } = root\n        const store = $store as Store<IStore>\n        const router = $router\n        const taskEditorAPIHandler = new TaskEditorAPIHandler( store, router )\n        const taskEditorWSHandler = new TaskEditorWSHandler( store )\n        // ======================================================================\n        const isLoading = ref(false)\n        watch( isLoading, () => {\n            if(isLoading.value){\n                store.commit(\"TurnOnLoading\")\n            }else{\n                store.commit(\"TurnOffLoading\")\n            }\n        })\n        // ======================================================================\n        function GetFormClass( dayData: IDayData ){\n\n            const CheckIsLightForm = ( dayData: IDayData ) => {\n                if (dayData.isLeave) {\n                    return true\n                }\n\n                if (dayData.formData.length == 0 && dayData.isFormClicked == false ) {\n                    return true\n                }\n\n                return false\n            }\n\n            return { \n                'light-form': CheckIsLightForm(dayData),\n            }\n        }\n        // ======================================================================\n        function HandleClickTableForm(){\n            emit('handleClickTableForm', props.dayData)\n        }\n        // ======================================================================\n        function HandleAddRows(dayData: IDayData, emitData: Array<IAddRow>){\n            // console.log(\"Handle Add Rows\")\n            // console.table(emitData)\n\n            const tasks = emitData.map( x => ({\n                    guid: GetGuid(),\n                    displayOrder: x.newIndex,\n                    date: dayData.date,\n                    taskType: GetOptionById( store.state.taskParameters.taskTypes, dayData.formData[x.newIndex].taskType ),\n                    taskSource: GetOptionById( store.state.taskParameters.taskSources, dayData.formData[x.newIndex].taskSource ),\n                    taskName: dayData.formData[x.newIndex].taskName,\n                    taskContent: dayData.formData[x.newIndex].taskContent,\n                } as IUpdateTask ))\n\n            const createTask = {\n                ownerGuid: props.user?.guid,\n                tasks,\n            } as ICreateTask\n            \n            taskEditorAPIHandler.CreateTask(createTask, isLoading, \n                ( response ) => {\n                    const guids = response.data as Array<string>\n                    emitData.forEach( ( row, idx ) => {\n                        dayData.formData[row.newIndex].guid = guids[idx]\n                    })\n\n                    createTask.tasks.forEach( (task, idx) => task.guid = guids[idx] )\n                    taskEditorWSHandler.CreateTask(createTask)\n                })\n        }\n\n        function HandleRemoveRows(dayData: IDayData, emitData: Array<IRemoveRow>){\n            // console.log(\"Handle Remove Rows\")\n            // console.table(emitData)\n\n            taskEditorWSHandler.DeleteTasks({\n                ownerGuid: props.user?.guid,\n                date: dayData.date,\n                taskGuids: emitData.map( x => x.value.guid ),\n            } as IDeleteTasks)\n        }\n\n        function HandleMoveRows(dayData: IDayData, emitData: Array<IMoveRow>){\n            // console.log(\"Handle Move Rows\")\n            // console.table(emitData)\n\n            taskEditorWSHandler.UpdateTaskRowOrder(emitData.map( moveRow => ({ \n                    ownerGuid: props.user?.guid,\n                    guid: dayData.formData[moveRow.newIndex].guid,\n                    date: dayData.date,\n                    displayOrder: moveRow.newIndex\n                } as IUpdateTaskRowOrder ))\n            )\n        }\n\n        function HandleModifyCells(dayData: IDayData, emitData: Array<IUpdateCell>){\n            // console.log(\"Handle Modify Cells\")\n            // console.table(emitData)\n\n            function GetValue(relatedKey: string, value: any){\n                if( relatedKey == \"taskType\" ){\n                    return GetOptionGuidById(store.state.taskParameters.taskTypes, value)\n                }\n\n                if( relatedKey == \"taskSource\" ){\n                    return GetOptionGuidById(store.state.taskParameters.taskSources, value)\n                }\n\n                return value\n            }\n\n            const updateTaskCols = [] as Array<IUpdateTaskCol>\n            emitData.forEach( cell => {\n                if( cell.newValue !== null ){\n                    updateTaskCols.push({\n                        ownerGuid: props.user?.guid,\n                        guid: dayData.formData[cell.rowIndex].guid,\n                        date: dayData.date,\n                        relatedKey: cell.relatedKey,\n                        value: GetValue(cell.relatedKey, cell.newValue),\n                    } as IUpdateTaskCol)\n                }\n            })\n\n            if (updateTaskCols.length > 0) {\n                taskEditorWSHandler.UpdateTaskCol(updateTaskCols)    \n            }\n        }\n\n        function HandleEmptyCells(dayData: IDayData, emitData: Array<IUpdateCell>){\n            // console.log(\"Handle Empty Cells\")\n            // console.table(emitData)\n            HandleModifyCells( dayData, emitData )\n        }\n        // ======================================================================\n\n        return {\n            options: computed( () => GetOptions(store.state.taskParameters) ),\n            isOptionsReady: computed( () => store.state.taskParameters.taskTypes.length > 0 && store.state.taskParameters.taskSources.length > 0),\n\n            GetFormClass,\n            HandleClickTableForm,\n            HandleAddRows,\n            HandleRemoveRows,\n            HandleMoveRows,\n            HandleEmptyCells,\n            HandleModifyCells,\n        }\n    }        \n})\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDayForm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDayForm.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TaskDayForm.vue?vue&type=template&id=1fa2d53e&\"\nimport script from \"./TaskDayForm.vue?vue&type=script&lang=ts&\"\nexport * from \"./TaskDayForm.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TaskDayForm.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],staticClass:\"TaskDayTimelineTitle text-h5 font-weight-bold py-3 px-4\",class:{ active: !_vm.dayData.isLeave},on:{\"click\":function($event){return _vm.HandleClickIsLeave(_vm.dayData)}}},[(_vm.dayData.isLeave)?_c('v-icon',{staticClass:\"icon\"},[_vm._v(\"mdi-marker-cancel\")]):_c('v-icon',{staticClass:\"icon\"},[_vm._v(\"mdi-pencil\")]),_vm._v(\" \"+_vm._s(_vm.FormatDate(_vm.dayData.date, \"MM/DD\"))+\" \"),_c('SimpleTransition',{attrs:{\"mode\":\"out-in\"}},[(_vm.dayData.isLeave)?_c('div',{staticClass:\"is-leave\"},[_c('v-checkbox',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],attrs:{\"input-value\":\"false\",\"label\":\"Leave\",\"disabled\":true,\"color\":\"blue lighten-5\"}})],1):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { computed, defineComponent, Ref, ref, watch } from '@vue/composition-api'\n\nimport SimpleTransition from '@/util/components/transition/SimpleTransition.vue'\n\nimport { Store } from 'vuex/types/index'\nimport { TaskEditorWSHandler } from '@/api/taskEditor'\nimport { IStore } from '@/models/store'\nimport { IClaims } from '@/models/authentication'\nimport { IDayData, IUpdateIsLeave } from '@/models/tasks'\n\nimport { FormatDate } from '@/util/taskDate'\n\nexport default defineComponent({\n    name: 'TaskDayTimelineTitle',\n    props:{\n        user:{\n            type: Object as () => IClaims,\n        },\n        dayData:{\n            type: Object as () => IDayData,\n        }\n    },\n    components:{\n        SimpleTransition,\n    },\n    setup( props, { emit, root } ){\n        const { $store, $router, $route } = root\n        const store = $store as Store<IStore>\n        const router = $router\n        const taskEditorWSHandler = new TaskEditorWSHandler( store )\n        // ======================================================================\n        function HandleClickIsLeave(dayData: IDayData){\n            // console.log(\"Handle Click IsLeave\")\n            dayData.isLeave = !dayData.isLeave\n            taskEditorWSHandler.UpdateIsLeave({\n                ownerGuid: props.user?.guid,\n                date: dayData.date,\n                isLeave: dayData.isLeave,\n            } as IUpdateIsLeave)\n\n            emit(\"input\")\n        }\n\n        const color = computed( () => props.dayData?.isLeave ? \"accent\" : \"primary\" )\n        \n\n        return {\n            color,\n            HandleClickIsLeave,\n            FormatDate,\n        }\n    }        \n})\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDayTimelineTitle.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDayTimelineTitle.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TaskDayTimelineTitle.vue?vue&type=template&id=0fbcbc7f&\"\nimport script from \"./TaskDayTimelineTitle.vue?vue&type=script&lang=ts&\"\nexport * from \"./TaskDayTimelineTitle.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TaskDayTimelineTitle.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { computed, defineComponent, Ref, ref, watch } from '@vue/composition-api'\n\nimport TaskDayForm from './TaskDayForm.vue'\nimport TaskDayTimelineTitle from './TaskDayTimelineTitle.vue'\n// import TaskDayLeaveIcon from './TaskDayLeaveIcon.vue'\n// import TaskDayLeaveCheckbox from './TaskDayLeaveCheckbox.vue'\nimport RippleTransitionFlip from '@/util/components/transition/RippleTransitionFlip.vue'\nimport SimpleTransition from '@/util/components/transition/SimpleTransition.vue'\n\nimport debounce from 'lodash.debounce'\nimport { Store } from 'vuex/types/index'\nimport { TaskEditorAPIHandler, TaskEditorWSHandler, TaskEditorWSListener } from '@/api/taskEditor'\nimport { IStore } from '@/models/store'\nimport { IClaims } from '@/models/authentication'\nimport { IDateRange, IDayData, IGetDaysDataResponse, \n    IQueryTasks, ITask, ITaskOption } from '@/models/tasks'\nimport { FormatDate, GetDateRange } from '@/util/taskDate'\nimport { GetOptionIdByOption } from '@/util/taskParameters'\n\nexport default defineComponent({\n    name: 'TaskDayTimeline',\n    props:{\n        user:{\n            type: Object as () => IClaims,\n        },\n        dateRange:{\n            type: Object as () => IDateRange,\n        },\n    },\n    components:{\n        TaskDayForm,\n        TaskDayTimelineTitle,\n        // TaskDayLeaveIcon,\n        // TaskDayLeaveCheckbox,\n        RippleTransitionFlip,\n        SimpleTransition,\n    },\n    setup( props, { emit, root } ){\n        const { $store, $router, $route } = root\n        const store = $store as Store<IStore>\n        const router = $router\n        const taskEditorAPIHandler = new TaskEditorAPIHandler( store, router )\n        const taskEditorWSHandler = new TaskEditorWSHandler( store )\n        const taskEditorWSListener = new TaskEditorWSListener( store )\n\n        const daysData = ref([] as Array<IDayData>)\n        // ======================================================================\n        const isLoading = ref(false)\n        watch( isLoading, () => {\n            if(isLoading.value){\n                store.commit(\"TurnOnLoading\")\n            }else{\n                store.commit(\"TurnOffLoading\")\n            }\n        })\n        // ======================================================================\n        function HandleClickTableForm(dayData: IDayData){\n            daysData.value.forEach( d => d.isFormClicked = false)\n            dayData.isFormClicked = true\n        }\n        // ======================================================================\n        const GetDaysData = ( dateRange: Array<string>, tasksDays: Array<IDayData> ) => {\n                const result = [] as Array<IDayData>\n                const mapper = {} as Record<string, IDayData>\n                tasksDays.forEach( tasksDay => mapper[tasksDay.date] = tasksDay )\n\n                dateRange.forEach( date => {\n                    const defaultDayData = {\n                        guid: \"\",\n                        date: date,\n                        isLeave: false,\n                        isFormClicked: false,\n                        formData: [],\n                    } as IDayData\n\n                    result.push({\n                        ...defaultDayData,\n                        ...mapper[date],\n                    })\n                })\n\n                // console.log( result )\n\n                return result\n            }\n\n        const isShowContent = ref(false)\n        function SetDaysData() {\n            const dateRange = GetDateRange(props.dateRange?.startDate, props.dateRange?.endDate)\n            if( dateRange.length == 0 ){\n                return\n            }\n\n            const queryTasks = {\n                ownerGuid: props.user?.guid,\n                startDate: props.dateRange?.startDate,\n                endDate: props.dateRange?.endDate,\n            } as IQueryTasks\n\n            daysData.value = []\n            taskEditorAPIHandler.GetDaysData(queryTasks, isLoading, (response) => {\n                    const tasksDays = response.data as Array<IGetDaysDataResponse>\n                    tasksDays.forEach( tasksDay => tasksDay.formData.forEach( task => {\n                        task.date = tasksDay.date\n                        task.taskSource = GetOptionIdByOption( store.state.taskParameters.taskSources, task.taskSource as ITaskOption ) as number\n                        task.taskType = GetOptionIdByOption( store.state.taskParameters.taskTypes, task.taskType as ITaskOption ) as number\n                    }))\n                    // console.log(tasksDays)\n                    daysData.value = GetDaysData(dateRange, tasksDays as Array<IDayData>)\n\n                    setTimeout( () => isShowContent.value = true, 150)\n                    // emit(\"updateDaysData\", daysData.value)\n                })\n\n            taskEditorWSHandler.Unsubscribe()\n            taskEditorWSHandler.Subscribe(queryTasks)\n        }\n\n        watch( () => [ props.user, props.dateRange ], debounce( () => {\n            isShowContent.value = false\n            SetDaysData()\n\n            // TODO\n            // 要做差異讀取\n            \n        }, 500 ))\n\n        function EmitUpdateDaysData() {\n            emit(\"updateDaysData\", daysData.value)\n            // console.log(\"updateDaysData\")\n        }\n        watch( () => [daysData.value], () => EmitUpdateDaysData() )\n        \n        // ======================================================================\n        // Hadnler ws message\n        \n        taskEditorWSListener.InitListener(daysData, EmitUpdateDaysData) \n\n        return {\n            isLoading,\n            isShowContent,\n            daysData,\n\n            HandleClickTableForm,\n            EmitUpdateDaysData,\n        }\n    }        \n})\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDayTimeline.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDayTimeline.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TaskDayTimeline.vue?vue&type=template&id=654b3ae3&scoped=true&\"\nimport script from \"./TaskDayTimeline.vue?vue&type=script&lang=ts&\"\nexport * from \"./TaskDayTimeline.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TaskDayTimeline.vue?vue&type=style&index=0&id=654b3ae3&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"654b3ae3\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { computed, defineComponent, onUnmounted, reactive, ref, watch } from '@vue/composition-api'\n\nimport Container from './layouts/Container.vue'\nimport TwoColumn from '@/views/layouts/TwoColumn.vue'\nimport MetaDisplayer from '@/components/trackTask/toolbar/MetaDisplayer.vue'\nimport TaskPeriodSimpleSummary from '@/components/trackTask/charts/TaskPeriodSimpleSummary.vue'\nimport TaskDayTimeline from '@/components/trackTask/taskForm/TaskDayTimeline.vue'\n\nimport { IClaims } from '@/models/authentication.ts'\nimport { IDateRange, IDayData } from '@/models/tasks'\nimport { TaskEditorAPIHandler, TaskEditorWSHandler } from '@/api/taskEditor'\nimport { ParameterAPIHandler } from '@/api/parameter'\nimport { Store } from 'vuex/types/index'\nimport { IStore } from '@/models/store'\n\ninterface ISummary{\n    InitSummary: Function;\n}\n\nexport default defineComponent({\n    name: 'TaskEditor',\n    props:{\n        widthMetaDisplayer:{\n            type: Number,\n            default: 300\n        }\n    },\n    components:{\n        Container,\n        TwoColumn,\n        MetaDisplayer,\n        TaskPeriodSimpleSummary,\n        TaskDayTimeline,\n    },\n    setup( props, { refs, root } ){\n        const { $store, $router, $route } = root\n        const store = $store as Store<IStore>\n        const router = $router\n        const taskEditorAPIHandler = new TaskEditorAPIHandler( store, router )\n        const taskEditorWSHandler = new TaskEditorWSHandler( store )\n        const parameterAPIHandler = new ParameterAPIHandler( store, router )\n\n        const targetUsers = ref([] as Array<IClaims>)\n        const targetUser = computed( () => targetUsers.value[0] )\n        const targetDates = ref({} as IDateRange)\n        const daysData = ref([] as Array<IDayData>)\n        // ======================================================================\n        const isLoading = ref(false)\n        watch( isLoading, () => {\n            if(isLoading.value){\n                store.commit(\"TurnOnLoading\")\n            }else{\n                store.commit(\"TurnOffLoading\")\n            }\n        })       \n        // ======================================================================\n        function InitTaskParameter(){\n            // if( store.state.taskParameters.taskSources.length == 0 ){\n                parameterAPIHandler.GetTaskSources(isLoading)\n            // }\n            \n            // if( store.state.taskParameters.taskTypes.length == 0 ){\n                parameterAPIHandler.GetTaskTypes(isLoading)\n            // }\n\n            // if( !store.state.taskParameters.dayWorkLimitTime ){\n                parameterAPIHandler.GetDayWorkLimitTime(isLoading)\n            // }\n        }\n        InitTaskParameter()\n        // ======================================================================\n\n        function HandleUpdateDaysData( emitData: Array<IDayData> ){\n            daysData.value = emitData as Array<IDayData>\n            (refs.summary as ISummary).InitSummary()\n        }\n\n        onUnmounted( () => {\n            taskEditorWSHandler.Unsubscribe()\n        })\n\n        return {\n            targetUser,\n            targetUsers,\n            targetDates,\n            daysData,\n            HandleUpdateDaysData\n        }\n    }        \n})\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TaskEditor.vue?vue&type=template&id=ad8b6cc4&\"\nimport script from \"./TaskEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./TaskEditor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TaskEditor.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDayTimeline.vue?vue&type=style&index=0&id=654b3ae3&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskDayForm.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskEditor.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}